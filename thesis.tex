\documentclass[a4paper,10pt]{memoir}
\usepackage[italian]{babel}
\usepackage{wrapfig}
\usepackage[pdftex]{graphicx}
\usepackage{graphviz}
\usepackage{amsmath}
\usepackage{float}

\usepackage[chapter]{minted}
\usepackage{adjustbox}
\usepackage{hyperref}
\hypersetup{
  colorlinks   = true,    % Colours links instead of ugly boxes
  urlcolor     = black,    % Colour for external hyperlinks
  linkcolor    = black,    % Colour of internal links
  citecolor    = black      % Colour of citations
}

% import package
\usepackage{FrontespizioSapienza}

\pagestyle{plain}%%to insert the number of the page

% declare info
\FSSTitolo{Titolo}
\FSSFacolta{Ingegneria dell'Informazione, Informatica e Statistica}
\FSSCorso{Informatica}

\FSSCandidato{Edoardo Ottavianelli}
\FSSMatricola{1756005}
\FSSRelatore{Emanuele Panizzi}
\FSSCorrelatore{}
\FSSAnnoAccademico{2019/2020}


\begin{document}

\frontmatter


% print title
\maketitle
\cleardoublepage

%\vspace*{10cm}
%\begin{flushright}
%\textsl{...}
%\end{flushright}
%\cleardoublepage

% ======================================= ABSTRACT ================================================
\begin{abstract}
  abstract
\end{abstract}
\cleardoublepage

\tableofcontents
\cleardoublepage

\mainmatter

\renewcommand\chapterheadstart{}
\renewcommand\printchaptername{}
\renewcommand\chapternamenum{}
\renewcommand\printchapternum{}
\renewcommand\afterchapternum{}
\renewcommand\printchaptertitle[1]{\chaptitlefont \thechapter. \space #1}


% ======================================= CHAPTER 1 ================================================
\chapter{Introduzione a SeismoCloud e obiettivi del progetto}

\section{I terremoti e la loro natura}

\begin{wrapfigure}[14]{r}{0.50\textwidth}
\caption{Composizione della Terra}
\label{fig:crostaterrestre}
\includegraphics[width=0.50\textwidth]{Chapter-1/crosta-terrestre.png}
\end{wrapfigure}

La terra è composta a strati, o meglio da involucri concentrici (come possiamo notare dalla figura 1.1), ed ognuno di essi ha diverse caratteristiche e particolarità.
Al centro della Terra c'è il \textbf{nucleo interno}, ossia un ammasso viscoso composto quasi esclusivamente da ferro avente un raggio di circa 1250 km. Si raggiungono temperature molto elevate, circa 5000-6000$^{\circ}$C.
A seguire abbiamo il \textbf{nucleo esterno}, principalmente composto per il 20\% da ferro e la restante parte nichel, raggiunge circa i 3000$^{\circ}$C. Comprendendo anche il nucleo interno, ha un raggio di circa 3500 km. \\

Continuando verso l'esterno, troviamo il \textbf{mantello terrestre}, che si divide in superiore ed inferiore.
È composto da diversi metalli ed è difficile stabilire la temperatura dato i moti convettivi del calore, ma si stima intorno ai 500$^{\circ}$C a confine con la crosta terrestre e 3000$^{\circ}$C a confine con il nucleo. \\
Infine abbiamo la \textbf{crosta terrestre}, che partendo dalla superficie, arriva fino a 70 km di profondità. \\
Insieme, il \textit{mantello superiore} e la \textit{crosta terrestre} formano la \textbf{litosfera}.
La litosfera è suddivisa in una decina di placche tettoniche principali e altre numerose placche di minori dimensioni (figura 1.2). Queste placche "galleggiano" sullo strato immediatamente sottostante del mantello superiore. \\
Esse, data la forte pressione e le alte temperature, subiscono sforzi di enormi dimensioni che formano i \textbf{terremoti}. \\
I terremoti sono vibrazioni della crosta terrestre, provocate dallo spostamento  di una o più placche nella litosfera.
Le placche si muovono flettendosi lentamente e poi rilasciando (raggiunto il \textit{punto di rottura}) in maniera elastica tutta l'energia accumulata.
Il punto in cui viene generata questa energia è detto \textbf{ipocentro}, zona in cui sono presenti delle fratture chiamate \textit{faglie}, mentre il punto in superficie posto sulla verticale dell'ipocentro è chiamato \textbf{epicentro}.
\clearpage


\begin{figure}
\caption{Placche tettoniche}
\label{fig:placchetettoniche}
\includegraphics[width=1\textwidth]{Chapter-1/placche-tettoniche.png}
\end{figure}

Esistono tre tipi di faglie: faglie \textit{trascorrenti}, faglie \textit{dirette} e \textit{inverse}.
Esistono in egual numero differenti tipi di onde sismiche. \\
Le \textbf{onde di compressione o longitudinali} fanno comprimere e dilatare la materia nella stessa direzione con cui si propaga l'onda.
Sono anche dette \textit{primarie}, perché sono le onde che viaggiano a velocità più elevate. \\
Le \textbf{onde di taglio o trasversali} fanno compiere alla materia oscillazioni in modo perpendicolare alla loro direzione di propagazione. Hanno effetto solo nei solidi, non possono propagarsi attraverso corpi liquidi o gassosi.
Vengono chiamate anche \textit{onde secondarie}, essendo meno veloci delle precedenti. \\
Le \textbf{onde superficiali}, anche se il nome può essere mal interpretato, non si manifestano in superficie. Questo tipo di onde sono la combinazione delle due precedenti, perciò sono molto complesse e sono le più pericolose. 

\clearpage

\section{Misurazione dei terremoti}

\subsection{Tipologie di terremoti}
Abbiamo 4 differenti tipologie di terremoti: \textit{tettonici}, \textit{vulcanici}, \textit{da crollo} e \textit{artificiali}. \\
I terremoti \textbf{tettonici}, come dice il nome, sono provocati dal movimento delle placche tettoniche e hanno origine lungo le faglie.
Sono i più pericolosi ed i più frequenti. \\
I terremoti \textbf{vulcanici} sono originati dall'attività vulcanica nel sottosuolo. Sono meno pericolosi dei precedenti data la minor energia rilasciata e l'estensione limitata. \\
I terremoti \textbf{da crollo} si originano durante il crollo di montagne, grotte o frane. Hanno una bassa pericolosità e frequenza. \\
Infine, i terremoti \textbf{artificiali} vengono originati da attività umane. Ad esempio, una grande esplosione. In generale, hanno una potenza molto limitata. \\

\subsection{Metodologie di misurazione}
Esistono due tipologie principali di misurazione di un terremoto: la scala \textbf{Mercalli} e la scala \textbf{Richter}. \\
La scala Mercalli misura l'\textit{intensità} di un terremoto osservando i danni causati da esso. Per questo, dato che tiene in conto solo degli effetti che la scossa produce, può essere applicata anche ai terremoti avvenuti nel passato.
Assegna dei numeri crescenti per intensità, si va dall'uno (impercettebile) sino a dodici (apocalittica). \\
La scala (o meglio \textit{indice}) Richter misura invece l'energia sprigionata dalla scossa, ossia la \textit{magnitudo}. Viene chiamata scala, ma è più corretto dire indice dato che non ha un range di valori finito. La magnitudo è descritta da questa formula: \\

\begin{center}
\textit{M_\mathrm{w} = {\frac{2}{3}}\log_{10}($M_0$) - 6}
\end{center}
dove $M_0$ è il momento sismico all'ipocentro da esprimere in Newton per metro|N·m. \\
Ad oggi il massimo valore magnitudo registrato è 9,5. \\
\subsection{Strumenti di misurazione}
Sono principalmente due: il \textbf{sismografo} ed il \textbf{sismometro}. \\
Entrambi misurano accelerazione e velocità dei movimenti del suolo, con la differenza che il sismometro misura solamente, ma non può registrare i dati; il sismografo invece oltre alla misura produce anche un grafico temporale, chiamato appunto \textit{sismogramma}. \\
Quella che vediamo in figura 1.3 è la \textbf{Rete Sismica Nazionale}. \\
È una rete di stazioni sismiche (circa 300) disposte su tutto il territorio italiano e appena fuori dai confini.
Per la maggioranza sono stazioni dell'INGV (Istituto Nazionale di Geologia e Vulcanologia), ma ne fanno parte anche altre piccole reti. \\
Questa rete monitora sette giorni su sette, 24 ore su 24 i movimenti del suolo e li registra, inviandoli poi ai centri di elaborazione dati di Roma, Grottaminarda e Catania. \\
La concentrazione maggiore di terremoti in Italia è nell'appennino e nel sud Italia, per questo la maggior parte delle stazioni è posizionata in questi punti.

\clearpage

\begin{figure}
\caption{Rete Sismica Nazionale}
\label{fig:RSN}
\includegraphics[width=1\textwidth]{Chapter-1/RSN.jpg}
\end{figure}

\clearpage

\section{Piattaforma SeismoCloud}

\subsection{Introduzione al progetto}

\begin{wrapfigure}[14]{r}{0.15\textwidth}
\includegraphics[width=0.15\textwidth]{Chapter-1/seismocloud.png}
\includegraphics[width=0.15\textwidth]{Chapter-1/ingv.jpg}
\end{wrapfigure}

SeismoCloud è una rete di sismometri a basso costo distribuiti in tutta Italia. 
Ha come scopo l'\textit{Earthquake Early Warning}, ossia monitorare l'attività sismica e, nel caso viene rilevato un terremoto, notificare le persone interessate. \\
L'obiettivo specifico dell'EEW è l'avviso \textbf{in tempo reale} di un possibile sisma. \\
I sismometri possono essere costruiti personalmente se si ha capacità di elettronica di base, altrimenti viene utilizzato il sensore interno di uno smartphone. \\
È un progetto nato dall'Università La Sapienza e l'INGV.

\subsection{Architettura di sistema}
I sismometri sono di due tipologie: \textit{fissi} e \textit{mobili}. \\
I \textbf{sismometri fissi} sono dei componenti elettronici formati da un chip a basso costo con un modulo Wi-Fi integrato per la connessione ad Internet e un modulo con giroscopio e accelerometro.
Per una migliore rilevazione si consiglia di fissarli ad un muro. \\
I \textbf{sismometri mobili} invece utilizzano l'applicazione per smartphone, abilitando l'accelerometro interno del telefono per rilevare vibrazioni. \\
Devono essere appoggiati su un piano, per esempio un tavolo. \\
Durante la registrazione di un nuovo sismometro, esso viene localizzato per conoscere la sua posizione (fondamentale al rilevamento corretto dei sismi). Nonostante ciò la privacy può essere conservata mostrando il sismometro nella mappa pubblica con una finta posizione casuale nel raggio di 2km. \\
I sismometri utilizzano il protocollo ISO standard \textbf{MQTT} (Message Queue Telemetry Transport) per inviare e ricevere messaggi. \\
È stato progettato per un basso impatto a livello di banda e di risorse. I client si iscrivono ad un \textit{topic}, ossia un identificatore che si riferisce ad un dato ben preciso (ad esempio \textit{sensor/temperature}). \\
Oltre a ricevere dati, posso \textit{pubblicarli}, cioè inviare dati riferiti ad un topic, dati che gli iscritti al topic riceveranno. 
I dati inviati vengono elaborati in un server centrale che li gestisce, compie dei calcoli su di essi e li archivia.
\begin{figure}[H]
\includegraphics[width=1\textwidth]{Chapter-1/mqtt.jpg}
\end{figure}

\clearpage 

Per i messaggi di invio e ricezione dei sismometri e per tutti i dati prodotti da essi viene utilizzato lo stile architetturale \textbf{REST} (REpresentational State Transfer). \\
Questo schema è definito da dei principi: 
\begin{itemize}
  \item Tutto è considerato una risorsa
  \item Ogni risorsa è identificabile da un URI (Uniform Resource Identifier)
  \item Usa metodi HTTP standard (GET, POST, PUT, DELETE)
  \item Possibili rappresentazioni multiple per la stessa risorsa
  \item La comunicazione deve essere sempre senza stato
\end{itemize}
Un esempio di risorsa in stile REST è: \textit{example.domain/sensor/sensor-id/connect}, dove sensor-id è l'identificatore unico per un sensore. \\
Tramite l'app mobile (disponibile per Android e iOS) è possibile visualizzare la lista dei propri sismometri, una mappa aggiornata in tempo reale con i sismometri attivi e i terremoti recenti, una lista di terremoti con relativa magnitudo, posizione e profondità dell'ipocentro (ordinati cronologicamente) e infine alcuni informazioni utili. \\
Tramite l'interfaccia web è possibile visualizzare tutte le informazioni prima citate ed in più una dashboard personalizzata (\href{https://my.seismocloud.com}{my.SeismoCloud.com}).
Nella dashboard personale è possibile visualizzare due grafici che mostrano il tempo di utilizzo assoluto e settimanale di ogni sismometro attivo. \\
Dopo l'effettiva autenticazione (tramite password o QRCode) si entra nella parte privata, ossia relativa ad un determinato \textit{gruppo} (insiemi di sismometri raggruppati per locazione). \\
Qui, oltre alle funzionalità citate, è presente un sistema di \textbf{EUD} (End User Development). \\
È un sistema che permette agli utenti di programmare delle azioni e svolgere dei compiti quando si verificano opportune condizioni. \\
Ad esempio, si può ricevere un messaggio automatico tramite Telegram ogni volta che il mio sismometro vibra. \\



\begin{figure}
\caption{Achitettura di SeismoCloud}
\label{fig:ArchitetturaSeismoCloud}
\includegraphics[width=1\textwidth]{Chapter-1/architettura-seismocloud.png}
\end{figure}

\clearpage

\section{Community SeismoCloud}

\subsection{Un lavoro di gruppo}

\begin{wrapfigure}[14]{r}{0.6\textwidth}
\caption{Rete Sismica SeismoCloud}
\label{fig:RSS}
\includegraphics[width=0.6\textwidth]{Chapter-1/seismoitalia.jpg}
\end{wrapfigure}
Come si può notare dalla Figura 1.5 (a lato) la Rete Sismica SeismoCloud si estende su tutto il territorio nazionale. Ad oggi si contano circa 100 sismometri attivi. \\
Ad oggi il sistema EEW non è attivo perché i sismometri presenti non bastano a compiere delle rilevazioni sufficienti. \\
I nodi della rete sono ben distribuiti nel centro Italia, poco nel Sud. Questo è un problema perché l'attività sismica principale in Italia si sviluppa lungo la catena appenninica fino in Sicilia. Grande menzione meritano \\ anche i vulcani attivi (Etna, \\ Stromboli, Vesuvio, Vulcano). \\
La community è legata tramite vari \\ canali: un gruppo su Telegram ed \\ uno su Facebook. \\
Il codice di alcune porzioni di \\ sistema sono disponibili su GitHub \\ sotto l'organizzazione \href{https://github.com/SapienzaApps}{SapienzaApps}.\\
SeismoCloud viene presentato anche \\ nelle scuole per sensibilizzare gli \\ studenti sul tema terremoti ed \\ utilizzare questo progetto come \\ strumento didattico.

\subsection{Bisogni della community}
Attivando un sismometro (fisso o mobile che sia) produco una mole abbastanza consistente di dati. \\
Con una cadenza periodica (qualche minuto, dipende dal carico del sistema) vengono pubblicati questi dati: indirizzo IP locale e pubblico, indirizzo MAC e qualità del segnale della rete Wi-Fi, localizzazione e temperatura del sismometro, soglia attuale (valore utile alla rilevazione di una vibrazione). \\ Quando il sismometro rileva una vibrazione viene inviata l'intensità della vibrazione. \\
Un topic MQTT è dedicato al comando \textit{reboot}, ossia la possibilità di riavviare il sismometro. \\
eud presente

e

e

e

e

e

e

e

\begin{figure}[H]
\caption{Vecchio sistema EUD}
\label{VecchioEUD}
\includegraphics[width=1\textwidth]{Chapter-1/eud-vecchio.jpg}
\end{figure}

di cosa hanno bisogno gli utenti

\clearpage

% ======================================= CHAPTER 2 ================================================
\chapter{Architettura di Node-RED adattata a SeismoCloud}

\section{Perché Node-RED}

placeholder

\clearpage

\section{Difficoltà e limiti nell'uso di Node-RED}

placeholder

\clearpage

\section{Pianificazione del progetto}

placeholder

\clearpage

\section{Architettura adattata a SeismoCloud}

placeholder

\clearpage

\section{Implementazione delle funzionalità tramite nodi}

placeholder

\clearpage

\section{Ottimizzazione delle prestazioni}

placeholder

\clearpage

% ======================================= CHAPTER 3 ================================================
\chapter{Sicurezza e protezione dei dati}

\section{Sicurezza nella piattaforma Node-RED}

placeholder

\clearpage

\section{Ricerca ed analisi di vulnerabilità}

placeholder

\clearpage

\section{Risoluzione dei problemi}

placeholder

\clearpage


% ======================================= CHAPTER 4 ================================================
\chapter{Test, conclusioni e sviluppi futuri}

\section{Iterazioni dei Test}

placeholder

\clearpage

\section{Conclusioni}

placeholder

\clearpage

\section{Sviluppi futuri}

placeholder

\clearpage

\refstepcounter{chapter}

\chapter*{Ringraziamenti}

\cleardoublepage

\refstepcounter{chapter}

% ======================================= BIBLIOGRAPHY ================================================
\begin{thebibliography}{9}

\bibitem{Istituto Nazionale di Geologia e Vulcanologia}
  \textbf{Istituto Nazionale di Geologia e Vulcanologia}.
  \href{http://ingv.it}{http://ingv.it}

\bibitem{MathWorks}
  \textbf{Publish MQTT messages and subscribe to message topics}.
  \href{https://www.mathworks.com/help/supportpkg/raspberrypi/ref/publish-and-subscribe-to-mqtt-messages.html}{https://www.mathworks.com}

\end{thebibliography}

\end{document}